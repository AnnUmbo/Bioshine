<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tienda - Bioshine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color:#f8f9fa; }
        .card-product { border-radius:12px; overflow:hidden; }
        .card-img-top { height:180px; object-fit:cover; }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
    <div class="container">
        <!-- Logo central con desplazamiento -->
        <a class="navbar-brand mx-auto" href="index.html">
            <img src="Titulo.png" alt="Logo de la Tienda" class="d-inline-block align-text-top rounded img-fluid" style="max-height:56px;">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavTienda" aria-controls="navbarNavTienda" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavTienda">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <!-- espacio left -->
            </ul>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html#quienes-somos">Quiénes Somos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="tienda.html">Tienda</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="index.html#contacto">Contacto</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Catálogo de Productos</h1>
        <div>
            <input id="search" class="form-control d-inline-block" style="width:220px;" placeholder="Buscar producto...">
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-auto">
            <div class="btn-group" role="group" aria-label="Categorias">
                <button class="btn btn-outline-primary category-btn active" data-cat="all">Todos</button>
                <button class="btn btn-outline-primary category-btn" data-cat="macetas">Macetas</button>
                <button class="btn btn-outline-primary category-btn" data-cat="kits">Kits</button>
                <button class="btn btn-outline-primary category-btn" data-cat="plantas">Plantas</button>
            </div>
        </div>
        <div class="col text-end">
            <a href="#" class="btn btn-sm btn-outline-secondary" id="view-cart">Ver carrito (<span id="cart-count">0</span>)</a>
        </div>
    </div>

    <div class="row g-4" id="products">
        <!-- Products will be injected here by JS -->
    </div>
</div>

<footer class="bg-dark text-white text-center py-4 mt-5">
    <div class="container">&copy; 2025 BIOSHINE. Todos los derechos reservados.</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const PRODUCTS = [
    {id:1,title:'Maceta Cerámica Azul',price:15,cat:'macetas',img:'muestra1.png'},
    {id:2,title:'Kit de Cultivo Básico',price:15,cat:'kits',img:'muestra2.png'},
    {id:3,title:'Planta Aromática - Albahaca',price:10,cat:'plantas',img:'muestra3.png'},
    {id:4,title:'Maceta Colgante',price:22,cat:'macetas',img:'muestra1.png'},
    {id:5,title:'Kit Premium',price:35,cat:'kits',img:'muestra2.png'},
];

function renderProducts(list){
    const container = document.getElementById('products');
    container.innerHTML = '';
    if(!list.length){ container.innerHTML = '<div class="col-12 text-center text-muted">No se encontraron productos.</div>'; return; }
    list.forEach(p=>{
        const col = document.createElement('div'); col.className='col-12 col-md-6 col-lg-4';
        col.innerHTML = `
            <div class="card card-product h-100 shadow-sm">
                <img src="${p.img}" class="card-img-top" alt="${p.title}">
                <div class="card-body text-center">
                    <h5 class="card-title">${p.title}</h5>
                    <p class="text-muted">S/. ${p.price}</p>
                    <div class="d-flex justify-content-center gap-2">
                        <button class="btn btn-sm btn-outline-primary btn-add" data-id="${p.id}">Agregar</button>
                        <button class="btn btn-sm btn-primary btn-buy" data-id="${p.id}">Comprar</button>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(col);
    })
}

function filterProducts(q,cat){
    q = (q||'').toLowerCase();
    return PRODUCTS.filter(p=> (cat==='all'||p.cat===cat) && (p.title.toLowerCase().includes(q)) );
}

// Cart using localStorage
function getCart(){ return JSON.parse(localStorage.getItem('bs_cart')||'[]'); }
function saveCart(c){ localStorage.setItem('bs_cart', JSON.stringify(c)); updateCartCount(); }
function addToCart(id){ const cart=getCart(); const item=cart.find(x=>x.id===id); if(item) item.qty++; else cart.push({id:id,qty:1}); saveCart(cart); }
function updateCartCount(){ const cart=getCart(); const count = cart.reduce((s,i)=>s+i.qty,0); document.getElementById('cart-count').textContent = count; }

// events
document.addEventListener('click', (e)=>{
    if(e.target.matches('.btn-add')){ const id=+e.target.dataset.id; addToCart(id); }
    if(e.target.matches('.btn-buy')){ const id=+e.target.dataset.id; addToCart(id); alert('Producto agregado al carrito.'); }
})

document.getElementById('search').addEventListener('input', (e)=>{
    const q=e.target.value; const activeCat=document.querySelector('.category-btn.active').dataset.cat; renderProducts(filterProducts(q,activeCat));
});

document.querySelectorAll('.category-btn').forEach(b=>b.addEventListener('click',(e)=>{
    document.querySelectorAll('.category-btn').forEach(x=>x.classList.remove('active'));
    e.target.classList.add('active');
    const cat=e.target.dataset.cat; const q=document.getElementById('search').value; renderProducts(filterProducts(q,cat));
}));

// init
renderProducts(PRODUCTS);
updateCartCount();

</script>
</body>
</html>
